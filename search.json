[{"path":"https://2degreesinvesting.github.io/tiltWorkflows/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 tiltWorkflows authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/articles/tiltWorkflows.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Creating outputs for all tilt indicators","text":"","code":"library(dplyr, warn.conflicts = FALSE) library(readr, warn.conflicts = FALSE) library(fs) library(tiltWorkflows) #> Loading required package: tiltIndicatorAfter #> Loading required package: tiltToyData  # Helpers # Creates a path under ~/Downloads/tilt/ tilt_path <- function(...) {   path_home(\"Downloads\", \"tilt\", ...) } # Tries to read a .csv, but if it doesn't exist it returns another dataset read_csv_falling_back_to <- function(path, data) {   if (file_exists(path)) {     read_csv(path)   } else {     warning(\"Using \", deparse(substitute(data)), call. = FALSE)     data   } }  # Create a folder to save results dir_create(tilt_path(\"output\")) # Read data quietly, and extend the width of printed datasets options(readr.show_col_types = FALSE, width = 500)"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/articles/tiltWorkflows.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Creating outputs for all tilt indicators","text":"example defaults using toy datasets may use parameters file instead use data.","code":"europages_companies <- path(params$input, params$europages_companies) |>    read_csv_falling_back_to(tiltIndicatorAfter::ep_companies) |>   select(     \"company_name\",     \"country\",     \"company_city\",     \"postcode\",     \"address\",     \"main_activity\",     \"companies_id\"   ) #> Warning: Using tiltIndicatorAfter::ep_companies  ecoinvent_activities <- path(params$input, params$ecoinvent_activities) |>    read_csv_falling_back_to(tiltIndicatorAfter::ecoinvent_activities) #> Warning: Using tiltIndicatorAfter::ecoinvent_activities  ecoinvent_europages <- path(params$input, params$ecoinvent_europages) |>    read_csv_falling_back_to(tiltIndicatorAfter::matches_mapper) #> Warning: Using tiltIndicatorAfter::matches_mapper  ecoinvent_inputs <- path(params$input, params$ecoinvent_inputs) |>    read_csv_falling_back_to(tiltIndicatorAfter::ecoinvent_inputs) |>   select(     \"input_activity_uuid_product_uuid\",     \"exchange_name\",     \"exchange_unit_name\"   ) |>   distinct() #> Warning: Using tiltIndicatorAfter::ecoinvent_inputs  isic <- path(params$input, params$isic) |>    read_csv_falling_back_to(tiltIndicatorAfter::isic_tilt_mapper) #> Warning: Using tiltIndicatorAfter::isic_tilt_mapper"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/articles/tiltWorkflows.html","id":"emissions-profile","dir":"Articles","previous_headings":"","what":"Emissions profile","title":"Creating outputs for all tilt indicators","text":"","code":"# Load data specific to this indicator emissions_profile_any_companies <- path(params$input, params$emissions_profile_any_companies) |>    read_csv_falling_back_to(read_csv(toy_emissions_profile_any_companies())) #> Warning: Using read_csv(toy_emissions_profile_any_companies())  # FIXME User toy_emissions_profile_products_ecoinvent() # See https://github.com/2DegreesInvesting/tiltToyData/pull/12 # https://github.com/2DegreesInvesting/tiltWorkflows/issues/9 emissions_profile_products <- path(params$input, params$emissions_profile_products) |>    read_csv_falling_back_to(read_csv(toy_emissions_profile_products())) #> Warning: Using read_csv(toy_emissions_profile_products())  # Create results at product and company level emissions_profile <- profile_emissions(   emissions_profile_any_companies,   emissions_profile_products,   europages_companies = europages_companies,   ecoinvent_activities = ecoinvent_activities,   ecoinvent_europages = ecoinvent_europages,   isic = isic,   low_threshold = 1 / 3,   high_threshold = 2 / 3 )  emissions_profile |>    unnest_product() |>    write_csv(path(params$output, \"emissions_profile_at_product_level.csv\")) |>    print() #> # A tibble: 49 × 26 #>    companies_id                             company_name country PCTR_risk_category benchmark        ep_product matched_activity_name matched_reference_product unit  multi_match matching_certainty matching_certainty_company_average tilt_sector tilt_subsector isic_4digit isic_4digit_name company_city postcode address main_activity activity_uuid_product_uuid                                                profile_ranking extra_rowid ep_id category geography #>    <chr>                                    <chr>        <chr>   <chr>              <chr>            <chr>      <chr>                 <chr>                     <chr> <lgl>       <chr>              <chr>                              <chr>       <chr>          <chr>       <chr>            <chr>           <dbl> <chr>   <chr>         <chr>                                                                               <dbl>       <int> <chr> <chr>    <chr>     #>  1 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               all              stove      NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa           1               1 NA    NA       NA        #>  2 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               isic_4digit      stove      NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa           1               1 NA    NA       NA        #>  3 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               tilt_sector      stove      NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa           1               1 NA    NA       NA        #>  4 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               unit             stove      NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa           1               1 NA    NA       NA        #>  5 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               unit_isic_4digit stove      NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa           1               1 NA    NA       NA        #>  6 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               unit_tilt_sector stove      NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa           1               1 NA    NA       NA        #>  7 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               all              oven       NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            be06d25c-73dc-55fb-965b-0f300453e380_98b48ff2-2200-4b08-9dec-9c7c0e3585bc           0.8             2 NA    NA       NA        #>  8 fleischerei-stiefsohn_00000005219477-001 NA           NA      medium             isic_4digit      oven       NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            be06d25c-73dc-55fb-965b-0f300453e380_98b48ff2-2200-4b08-9dec-9c7c0e3585bc           0.5             2 NA    NA       NA        #>  9 fleischerei-stiefsohn_00000005219477-001 NA           NA      medium             tilt_sector      oven       NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            be06d25c-73dc-55fb-965b-0f300453e380_98b48ff2-2200-4b08-9dec-9c7c0e3585bc           0.667           2 NA    NA       NA        #> 10 fleischerei-stiefsohn_00000005219477-001 NA           NA      medium             unit             oven       NA                    NA                        NA    NA          NA                 NA                                 Industry    Other          '2560'      NA               NA                 NA NA      NA            be06d25c-73dc-55fb-965b-0f300453e380_98b48ff2-2200-4b08-9dec-9c7c0e3585bc           0.5             2 NA    NA       NA        #> # ℹ 39 more rows     emissions_profile |>    unnest_company() |>    write_csv(path(params$output, \"emissions_profile_at_company_level.csv\")) |>    print() #> # A tibble: 129 × 11 #>    companies_id                             company_name country PCTR_share PCTR_risk_category benchmark matching_certainty_company_average company_city postcode address main_activity #>    <chr>                                    <chr>        <chr>        <dbl> <lgl>              <lgl>     <chr>                              <chr>           <dbl> <chr>   <chr>         #>  1 fleischerei-stiefsohn_00000005219477-001 NA           NA             1   NA                 NA        NA                                 NA                 NA NA      NA            #>  2 fleischerei-stiefsohn_00000005219477-001 NA           NA             0   NA                 NA        NA                                 NA                 NA NA      NA            #>  3 fleischerei-stiefsohn_00000005219477-001 NA           NA             0   NA                 NA        NA                                 NA                 NA NA      NA            #>  4 fleischerei-stiefsohn_00000005219477-001 NA           NA             0.5 NA                 NA        NA                                 NA                 NA NA      NA            #>  5 fleischerei-stiefsohn_00000005219477-001 NA           NA             0.5 NA                 NA        NA                                 NA                 NA NA      NA            #>  6 fleischerei-stiefsohn_00000005219477-001 NA           NA             0   NA                 NA        NA                                 NA                 NA NA      NA            #>  7 fleischerei-stiefsohn_00000005219477-001 NA           NA             0.5 NA                 NA        NA                                 NA                 NA NA      NA            #>  8 fleischerei-stiefsohn_00000005219477-001 NA           NA             0.5 NA                 NA        NA                                 NA                 NA NA      NA            #>  9 fleischerei-stiefsohn_00000005219477-001 NA           NA             0   NA                 NA        NA                                 NA                 NA NA      NA            #> 10 fleischerei-stiefsohn_00000005219477-001 NA           NA             0.5 NA                 NA        NA                                 NA                 NA NA      NA            #> # ℹ 119 more rows"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/articles/tiltWorkflows.html","id":"emissions-profile-upstream","dir":"Articles","previous_headings":"","what":"Emissions profile upstream","title":"Creating outputs for all tilt indicators","text":"","code":"# Load data specific to this indicator # FIXME User toy_emissions_profile_upstream_products_ecoinvent() # See https://github.com/2DegreesInvesting/tiltToyData/pull/12 # https://github.com/2DegreesInvesting/tiltWorkflows/issues/9 emissions_profile_upstream_products <- path(params$input, params$emissions_profile_upstream_products) |>    read_csv_falling_back_to(read_csv(toy_emissions_profile_upstream_products())) #> Warning: Using read_csv(toy_emissions_profile_upstream_products())  # Create results at product and company level emissions_profile_upstream <- profile_emissions_upstream(   emissions_profile_any_companies,   emissions_profile_upstream_products,   europages_companies = europages_companies,   ecoinvent_activities = ecoinvent_activities,   ecoinvent_inputs = ecoinvent_inputs,   ecoinvent_europages = ecoinvent_europages,   isic = isic,   low_threshold = 1 / 3,   high_threshold = 2 / 3 )  emissions_profile_upstream |>    unnest_product() |>    write_csv(path(params$output, \"emissions_profile_upstream_at_product_level.csv\")) |>    print() #> # A tibble: 319 × 27 #>    companies_id                             company_name country ICTR_risk_category benchmark         ep_product matched_activity_name matched_reference_product unit  multi_match matching_certainty matching_certainty_company_average input_name input_unit input_tilt_sector input_tilt_subsector input_isic_4digit input_isic_4digit_name company_city postcode address main_activity activity_uuid_product_uuid                                                profile_ranking extra_rowid ep_id category #>    <chr>                                    <chr>        <chr>   <chr>              <chr>             <chr>      <chr>                 <chr>                     <chr> <lgl>       <chr>              <chr>                              <chr>      <chr>      <chr>             <chr>                <chr>             <chr>                  <chr>           <dbl> <chr>   <chr>         <chr>                                                                               <dbl>       <int> <chr> <chr>    #>  1 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               all               stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          0.909            1 NA    NA       #>  2 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               all               stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          1                2 NA    NA       #>  3 fleischerei-stiefsohn_00000005219477-001 NA           NA      medium             all               stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          0.636            3 NA    NA       #>  4 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               all               stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          0.758            4 NA    NA       #>  5 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               all               stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          0.970            5 NA    NA       #>  6 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                all               stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          0.0909           6 NA    NA       #>  7 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                all               stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          0.121            7 NA    NA       #>  8 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               all               stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          0.697            8 NA    NA       #>  9 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               input_isic_4digit stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          0.857            1 NA    NA       #> 10 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               input_isic_4digit stove      NA                    NA                        NA    NA          NA                 NA                                 NA         NA         Inudstry          Other                '2560'            NA                     NA                 NA NA      NA            0a242b09-772a-5edf-8e82-9cb4ba52a258_ae39ee61-d4d0-4cce-93b4-0745344da5fa          1                2 NA    NA       #> # ℹ 309 more rows  emissions_profile_upstream |>    unnest_company() |>    write_csv(path(params$output, \"emissions_profile_upstream_at_company_level.csv\")) |>    print() #> # A tibble: 127 × 11 #>    companies_id                             company_name company_city country ICTR_share ICTR_risk_category benchmark         matching_certainty_company_average postcode address main_activity #>    <chr>                                    <chr>        <chr>        <chr>        <dbl> <chr>              <chr>             <chr>                                 <dbl> <chr>   <chr>         #>  1 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.571 high               all               NA                                       NA NA      NA            #>  2 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.214 medium             all               NA                                       NA NA      NA            #>  3 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.214 low                all               NA                                       NA NA      NA            #>  4 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.357 high               input_isic_4digit NA                                       NA NA      NA            #>  5 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.357 medium             input_isic_4digit NA                                       NA NA      NA            #>  6 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.286 low                input_isic_4digit NA                                       NA NA      NA            #>  7 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.429 high               input_tilt_sector NA                                       NA NA      NA            #>  8 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.357 medium             input_tilt_sector NA                                       NA NA      NA            #>  9 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.214 low                input_tilt_sector NA                                       NA NA      NA            #> 10 fleischerei-stiefsohn_00000005219477-001 NA           NA           NA           0.429 high               input_unit        NA                                       NA NA      NA            #> # ℹ 117 more rows"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/articles/tiltWorkflows.html","id":"sector-profile","dir":"Articles","previous_headings":"","what":"Sector profile","title":"Creating outputs for all tilt indicators","text":"","code":"# Load data specific to this indicator sector_profile_companies <- path(params$input, params$sector_profile_companies) |>    read_csv_falling_back_to(read_csv(toy_sector_profile_companies())) #> Warning: Using read_csv(toy_sector_profile_companies())  sector_profile_any_scenarios <- path(params$input, params$sector_profile_any_scenarios) |>    read_csv_falling_back_to(read_csv(toy_sector_profile_any_scenarios())) #> Warning: Using read_csv(toy_sector_profile_any_scenarios())  # Create results at product and company level sector_profile <- profile_sector(   sector_profile_companies,   sector_profile_any_scenarios,   europages_companies = europages_companies,   ecoinvent_activities = ecoinvent_activities,   ecoinvent_europages = ecoinvent_europages,   isic = isic,   low_threshold = 1 / 3,   high_threshold = 2 / 3 )  sector_profile |>    unnest_product() |>    write_csv(path(params$output, \"sector_profile_at_product_level.csv\")) |>    print() #> # A tibble: 196 × 28 #>    companies_id                             company_name country PSTR_risk_category scenario                             year ep_product matched_activity_name matched_reference_product unit  tilt_sector tilt_subsector multi_match matching_certainty matching_certainty_company_average company_city postcode address main_activity activity_uuid_product_uuid                                   profile_ranking extra_rowid isic_4digit sector   subsector      ep_id category isic_4digit_name #>    <chr>                                    <chr>        <chr>   <chr>              <chr>                               <dbl> <chr>      <chr>                 <chr>                     <chr> <chr>       <chr>          <lgl>       <chr>              <chr>                              <chr>           <dbl> <chr>   <chr>         <chr>                                                                  <dbl>       <int> <chr>       <chr>    <chr>          <chr> <chr>    <chr>            #>  1 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                IPR 1.5c RPS                         2030 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce          0.23             1 '2410'      industry iron and steel NA    NA       NA               #>  2 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               IPR 1.5c RPS                         2050 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce          0.96             1 '2410'      industry iron and steel NA    NA       NA               #>  3 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                stated policies scenario             2020 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce          0                2 '2410'      total    iron and steel NA    NA       NA               #>  4 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                announced pledges scenario           2020 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce          0                2 '2410'      total    iron and steel NA    NA       NA               #>  5 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                net zero emissions by 2050 scenario  2020 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce          0                2 '2410'      total    iron and steel NA    NA       NA               #>  6 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                stated policies scenario             2030 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce         -0.0752           2 '2410'      total    iron and steel NA    NA       NA               #>  7 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                announced pledges scenario           2030 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce          0.0781           2 '2410'      total    iron and steel NA    NA       NA               #>  8 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                net zero emissions by 2050 scenario  2030 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce          0.233            2 '2410'      total    iron and steel NA    NA       NA               #>  9 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                stated policies scenario             2040 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce         -0.0270           2 '2410'      total    iron and steel NA    NA       NA               #> 10 fleischerei-stiefsohn_00000005219477-001 NA           NA      medium             announced pledges scenario           2040 steel      NA                    NA                        NA    NA          NA             NA          NA                 NA                                 NA                 NA NA      NA            0faa7ecb-fef2-5117-8993-387c1236-001e-49b5-aa3d-810c0214f9ce          0.336            2 '2410'      total    iron and steel NA    NA       NA               #> # ℹ 186 more rows  sector_profile |>    unnest_company() |>    write_csv(path(params$output, \"sector_profile_at_company_level.csv\")) |>    print() #> # A tibble: 588 × 12 #>    companies_id                             company_name country PSTR_share PSTR_risk_category scenario                   year  matching_certainty_company_average company_city postcode address main_activity #>    <chr>                                    <chr>        <chr>        <dbl> <chr>              <chr>                      <chr> <chr>                              <chr>           <dbl> <chr>   <chr>         #>  1 fleischerei-stiefsohn_00000005219477-001 NA           NA               0 high               IPR 1.5c RPS               2030  NA                                 NA                 NA NA      NA            #>  2 fleischerei-stiefsohn_00000005219477-001 NA           NA               0 medium             IPR 1.5c RPS               2030  NA                                 NA                 NA NA      NA            #>  3 fleischerei-stiefsohn_00000005219477-001 NA           NA               1 low                IPR 1.5c RPS               2030  NA                                 NA                 NA NA      NA            #>  4 fleischerei-stiefsohn_00000005219477-001 NA           NA               1 high               IPR 1.5c RPS               2050  NA                                 NA                 NA NA      NA            #>  5 fleischerei-stiefsohn_00000005219477-001 NA           NA               0 medium             IPR 1.5c RPS               2050  NA                                 NA                 NA NA      NA            #>  6 fleischerei-stiefsohn_00000005219477-001 NA           NA               0 low                IPR 1.5c RPS               2050  NA                                 NA                 NA NA      NA            #>  7 fleischerei-stiefsohn_00000005219477-001 NA           NA               0 high               announced pledges scenario 2020  NA                                 NA                 NA NA      NA            #>  8 fleischerei-stiefsohn_00000005219477-001 NA           NA               0 medium             announced pledges scenario 2020  NA                                 NA                 NA NA      NA            #>  9 fleischerei-stiefsohn_00000005219477-001 NA           NA               1 low                announced pledges scenario 2020  NA                                 NA                 NA NA      NA            #> 10 fleischerei-stiefsohn_00000005219477-001 NA           NA               0 high               announced pledges scenario 2030  NA                                 NA                 NA NA      NA            #> # ℹ 578 more rows"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/articles/tiltWorkflows.html","id":"sector-profile-upstream","dir":"Articles","previous_headings":"","what":"Sector profile upstream","title":"Creating outputs for all tilt indicators","text":"","code":"# Load data specific to this indicator sector_profile_upstream_companies <-path(params$input, params$sector_profile_upstream_companies) |>  read_csv_falling_back_to(read_csv(toy_sector_profile_upstream_companies())) #> Warning: Using read_csv(toy_sector_profile_upstream_companies())  sector_profile_upstream_products <- path(params$input, params$sector_profile_upstream_products) |>    read_csv_falling_back_to(read_csv(toy_sector_profile_upstream_products())) #> Warning: Using read_csv(toy_sector_profile_upstream_products())  # Create results at product and company level sector_profile_upstream <- profile_sector_upstream(   sector_profile_upstream_companies,   sector_profile_any_scenarios,   sector_profile_upstream_products,   europages_companies = europages_companies,   ecoinvent_activities = ecoinvent_activities,   ecoinvent_inputs = ecoinvent_inputs,   ecoinvent_europages = ecoinvent_europages,   isic = isic,   low_threshold = 1 / 3,   high_threshold = 2 / 3 )  sector_profile_upstream |>    unnest_product() |>    write_csv(path(params$output, \"sector_profile_upstream_at_product_level.csv\")) |>    print() #> # A tibble: 704 × 31 #>    companies_id                             company_name country ISTR_risk_category scenario                             year ep_product matched_activity_name matched_reference_product unit  tilt_sector multi_match matching_certainty matching_certainty_company_average input_name input_unit input_tilt_sector    input_tilt_subsector company_city postcode address main_activity activity_uuid_produc…¹ profile_ranking extra_rowid input_isic_4digit sector subsector input_isic_4digit_name ep_id category #>    <chr>                                    <chr>        <chr>   <chr>              <chr>                               <dbl> <chr>      <chr>                 <chr>                     <chr> <chr>       <lgl>       <chr>              <chr>                              <chr>      <chr>      <chr>                <chr>                <chr>           <dbl> <chr>   <chr>         <chr>                            <dbl>       <int> <chr>             <chr>  <chr>     <chr>                  <chr> <chr>    #>  1 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                stated policies scenario             2020 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…           0               2 '3821'            bioen… total en… NA                     NA    NA       #>  2 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                stated policies scenario             2030 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…          -0.192           2 '3821'            bioen… total en… NA                     NA    NA       #>  3 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                stated policies scenario             2040 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…          -0.517           2 '3821'            bioen… total en… NA                     NA    NA       #>  4 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                stated policies scenario             2050 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…          -0.689           2 '3821'            bioen… total en… NA                     NA    NA       #>  5 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                announced pledges scenario           2020 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…           0               2 '3821'            bioen… total en… NA                     NA    NA       #>  6 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                announced pledges scenario           2030 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…           0.301           2 '3821'            bioen… total en… NA                     NA    NA       #>  7 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               announced pledges scenario           2040 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…           1.83            2 '3821'            bioen… total en… NA                     NA    NA       #>  8 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               announced pledges scenario           2050 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…           3.17            2 '3821'            bioen… total en… NA                     NA    NA       #>  9 fleischerei-stiefsohn_00000005219477-001 NA           NA      low                net zero emissions by 2050 scenario  2020 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…           0               2 '3821'            bioen… total en… NA                     NA    NA       #> 10 fleischerei-stiefsohn_00000005219477-001 NA           NA      high               net zero emissions by 2050 scenario  2030 stove      NA                    NA                        NA    energy      NA          NA                 NA                                 NA         NA         non-metallic minera… raw minerals         NA                 NA NA      NA            0a242b09-772a-5edf-8e…           0.909           2 '3821'            bioen… total en… NA                     NA    NA       #> # ℹ 694 more rows #> # ℹ abbreviated name: ¹​activity_uuid_product_uuid  sector_profile_upstream |>    unnest_company() |>    write_csv(path(params$output, \"sector_profile_upstream_at_company_level.csv\")) |>    print() #> # A tibble: 294 × 12 #>    companies_id                             company_name country ISTR_share ISTR_risk_category scenario                   year  matching_certainty_company_average company_city postcode address main_activity #>    <chr>                                    <chr>        <chr>        <dbl> <chr>              <chr>                      <chr> <chr>                              <chr>           <dbl> <chr>   <chr>         #>  1 fleischerei-stiefsohn_00000005219477-001 NA           NA           0     high               IPR 1.5c RPS               2030  NA                                 NA                 NA NA      NA            #>  2 fleischerei-stiefsohn_00000005219477-001 NA           NA           0.167 medium             IPR 1.5c RPS               2030  NA                                 NA                 NA NA      NA            #>  3 fleischerei-stiefsohn_00000005219477-001 NA           NA           0.833 low                IPR 1.5c RPS               2030  NA                                 NA                 NA NA      NA            #>  4 fleischerei-stiefsohn_00000005219477-001 NA           NA           1     high               IPR 1.5c RPS               2050  NA                                 NA                 NA NA      NA            #>  5 fleischerei-stiefsohn_00000005219477-001 NA           NA           0     medium             IPR 1.5c RPS               2050  NA                                 NA                 NA NA      NA            #>  6 fleischerei-stiefsohn_00000005219477-001 NA           NA           0     low                IPR 1.5c RPS               2050  NA                                 NA                 NA NA      NA            #>  7 fleischerei-stiefsohn_00000005219477-001 NA           NA           0     high               announced pledges scenario 2020  NA                                 NA                 NA NA      NA            #>  8 fleischerei-stiefsohn_00000005219477-001 NA           NA           0     medium             announced pledges scenario 2020  NA                                 NA                 NA NA      NA            #>  9 fleischerei-stiefsohn_00000005219477-001 NA           NA           1     low                announced pledges scenario 2020  NA                                 NA                 NA NA      NA            #> 10 fleischerei-stiefsohn_00000005219477-001 NA           NA           0     high               announced pledges scenario 2030  NA                                 NA                 NA NA      NA            #> # ℹ 284 more rows"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/articles/tiltWorkflows.html","id":"results","dir":"Articles","previous_headings":"","what":"Results","title":"Creating outputs for all tilt indicators","text":"","code":"dir_tree(tilt_path(\"output\")) #> /home/runner/Downloads/tilt/output #> ├── emissions_profile_at_company_level.csv #> ├── emissions_profile_at_product_level.csv #> ├── emissions_profile_upstream_at_company_level.csv #> ├── emissions_profile_upstream_at_product_level.csv #> ├── sector_profile_at_company_level.csv #> ├── sector_profile_at_product_level.csv #> ├── sector_profile_upstream_at_company_level.csv #> └── sector_profile_upstream_at_product_level.csv"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Mauro Lepore. Author, maintainer. Kalash Singhal. Author. 2 Degrees Investing Initiative. Copyright holder, funder.","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Lepore M, Singhal K (2023). tiltWorkflows: Makes Easy Run 'TILT' Workflows. R package version 0.0.0.9007,  https://github.com/2DegreesInvesting/tiltWorkflows, https://2degreesinvesting.github.io/tiltWorkflows/.","code":"@Manual{,   title = {tiltWorkflows: Makes it Easy to Run 'TILT' Workflows},   author = {Mauro Lepore and Kalash Singhal},   year = {2023},   note = {R package version 0.0.0.9007,  https://github.com/2DegreesInvesting/tiltWorkflows},   url = {https://2degreesinvesting.github.io/tiltWorkflows/}, }"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/index.html","id":"tiltworkflows","dir":"","previous_headings":"","what":"Makes it Easy to Run TILT Workflows","title":"Makes it Easy to Run TILT Workflows","text":"goal tiltWorkflows make easy run tilt workflows.","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Makes it Easy to Run TILT Workflows","text":"can install development version tiltWorkflows like :","code":"# install.packages(\"pak\") pak::pak(\"2DegreesInvesting/tiltWorkflows\")"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Makes it Easy to Run TILT Workflows","text":"","code":"library(tiltWorkflows)  if (interactive()) {   use_workflow() }"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/reference/tiltWorkflows-package.html","id":null,"dir":"Reference","previous_headings":"","what":"tiltWorkflows: Makes it Easy to Run 'TILT' Workflows — tiltWorkflows-package","title":"tiltWorkflows: Makes it Easy to Run 'TILT' Workflows — tiltWorkflows-package","text":"Makes easy run 'tilt' workflows.","code":""},{"path":[]},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/reference/tiltWorkflows-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"tiltWorkflows: Makes it Easy to Run 'TILT' Workflows — tiltWorkflows-package","text":"Maintainer: Mauro Lepore maurolepore@gmail.com (ORCID) contributors: 2 Degrees Investing Initiative contact@2degrees-investing.org [copyright holder, funder]","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/reference/use_workflow.html","id":null,"dir":"Reference","previous_headings":"","what":"Use a workflow file — use_workflow","title":"Use a workflow file — use_workflow","text":"Creates workflow file template tiltWorkflows package.","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/reference/use_workflow.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Use a workflow file — use_workflow","text":"","code":"use_workflow(template = \"tilt-profiles.Rmd\", save_as = template, open = FALSE)"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/reference/use_workflow.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Use a workflow file — use_workflow","text":"template Path template file relative templates/ directory within package; see details. save_as Path file create, relative root active project. Defaults template open Open newly created file editing? Happens RStudio, applicable, via utils::file.edit() otherwise.","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/reference/use_workflow.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Use a workflow file — use_workflow","text":"logical vector indicating file modified.","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/reference/use_workflow.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Use a workflow file — use_workflow","text":"","code":"if (FALSE) { # Note: Running this will write \"tilt-profiles.Rmd\" to your working directory use_workflow() # Same use_workflow(\"tilt-profiles.Rmd\") }"},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/news/index.html","id":"tiltworkflows-0009007-2023-12-08","dir":"Changelog","previous_headings":"","what":"tiltWorkflows 0.0.0.9007 (2023-12-08)","title":"tiltWorkflows 0.0.0.9007 (2023-12-08)","text":"Parametrize workflow tilt-profiles.Rmd (#14). helps users pass data via graphical user interface, without changing code.","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/news/index.html","id":"tiltworkflows-0009006-2023-12-08","dir":"Changelog","previous_headings":"","what":"tiltWorkflows 0.0.0.9006 (2023-12-08)","title":"tiltWorkflows 0.0.0.9006 (2023-12-08)","text":"workflow “tilt profiles” now reproducible toy data (#6).","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/news/index.html","id":"tiltworkflows-0009005-2023-12-08","dir":"Changelog","previous_headings":"","what":"tiltWorkflows 0.0.0.9005 (2023-12-08)","title":"tiltWorkflows 0.0.0.9005 (2023-12-08)","text":"New article: Use parameters (#12).","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/news/index.html","id":"tiltworkflows-0009004-2023-12-07","dir":"Changelog","previous_headings":"","what":"tiltWorkflows 0.0.0.9004 (2023-12-07)","title":"tiltWorkflows 0.0.0.9004 (2023-12-07)","text":"Depend tiltToyData (#8). makes toy datasets available user automatically call library(tiltWorkflows).","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/news/index.html","id":"tiltworkflows-0009003-2023-12-07","dir":"Changelog","previous_headings":"","what":"tiltWorkflows 0.0.0.9003 (2023-12-07)","title":"tiltWorkflows 0.0.0.9003 (2023-12-07)","text":"Depend tiltIndicatorAfter (#7). makes tiltWorkflows user friendly since ’s package users need install use – everything else happens behind hoods.","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/news/index.html","id":"tiltworkflows-0009002-2023-12-07","dir":"Changelog","previous_headings":"","what":"tiltWorkflows 0.0.0.9002 (2023-12-07)","title":"tiltWorkflows 0.0.0.9002 (2023-12-07)","text":"New use_workflow() helps users create workflow file template (#5).","code":""},{"path":"https://2degreesinvesting.github.io/tiltWorkflows/news/index.html","id":"tiltworkflows-0009001-2023-12-06","dir":"Changelog","previous_headings":"","what":"tiltWorkflows 0.0.0.9001 (2023-12-06)","title":"tiltWorkflows 0.0.0.9001 (2023-12-06)","text":"New article “Get started” (#4 @kalashsinghal).","code":""}]
