<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tiltWorkflows">
<title>tilt workflow â€¢ tiltWorkflows</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="tilt workflow">
<meta property="og:description" content="tiltWorkflows">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tiltWorkflows</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/tiltWorkflows.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>tilt workflow</h1>
                        <h4 data-toc-skip class="author">Kalash
Singhal</h4>
            
      
      
      <div class="d-none name"><code>tiltWorkflows.Rmd</code></div>
    </div>

    
    
<p>This file uses the output from the tiltIndicatorBefore package as the
inputs to the tiltIndicator and tiltIndicatorAfter packages. This script
uses the CSV files from the tiltIndicatorBefore package to create the
final output of the four indicators.</p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># devtools::install_github("2DegreesInvesting/tiltIndicatorAfter")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">tiltIndicatorAfter</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tiltindicatorafter-data-common-for-all-indicators">tiltIndicatorAfter data common for all indicators<a class="anchor" aria-label="anchor" href="#tiltindicatorafter-data-common-for-all-indicators"></a>
</h2>
<p><code>ep_companies</code>, <code>ei_activities_overview</code>,
<code>mapper_ep_ei</code>, <code>ei_input_data</code>, and
<code>isic_4digit_name</code> are the five datasets which are used as
the input for the tiltIndicatorAfter package. They all are the output
from tiltIndicatorBefore package. These five datasets are used for
adding additional data to all the four indicators (Emissions profile,
Emissions profile upstream, Sector profile, Sector profile
upstream).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ep_companies</span></span>
<span><span class="va">europages_campanies</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/ep_companies.csv"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="st">"company_name"</span>, <span class="st">"country"</span>, <span class="st">"company_city"</span>, <span class="st">"postcode"</span>, <span class="st">"address"</span>, <span class="st">"main_activity"</span>, <span class="st">"companies_id"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ecoinvent_activities</span></span>
<span><span class="va">ei_activities_ov</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/ei_activities_overview.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># matches_mapper</span></span>
<span><span class="va">mapper_ep_ei</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/mapper_ep_ei.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ecoinvent_inputs</span></span>
<span><span class="va">ei_input</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/ei_input_data.csv"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="st">"input_activity_uuid_product_uuid"</span>, <span class="st">"exchange_name"</span>, <span class="st">"exchange_unit_name"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">distinct</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># isic_4digit_name</span></span>
<span><span class="va">isic_4digit_name</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/isic_4digit_name.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="emissions-profile">Emissions profile<a class="anchor" aria-label="anchor" href="#emissions-profile"></a>
</h2>
<div class="section level3">
<h3 id="load-data">Load Data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h3>
<p>The input data of Emissions_profile which comes from
tiltIndicatorBefore package becomes the input for the tiltIndicator
package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># emissions_profile companies</span></span>
<span><span class="va">ep_company</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/emissions_profile_any_companies_ecoinvent.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># emissions_profile products</span></span>
<span><span class="va">ep_product</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/emissions_profile_products_ecoinvent.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-emissions_profile-product-and-company-level-outputs">Create Emissions_profile product and company level outputs<a class="anchor" aria-label="anchor" href="#create-emissions_profile-product-and-company-level-outputs"></a>
</h3>
<p>The code takes the output of tiltIndicator and use it as an input for
the tiltIndicatorAfter package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emissions_profile</span> <span class="op">&lt;-</span> <span class="fu">profile_emissions</span><span class="op">(</span><span class="va">ep_company</span>,</span>
<span>  <span class="va">ep_product</span>,</span>
<span>  europages_companies <span class="op">=</span> <span class="va">europages_campanies</span>,</span>
<span>  ecoinvent_activities <span class="op">=</span> <span class="va">ei_activities_ov</span>,</span>
<span>  ecoinvent_europages <span class="op">=</span> <span class="va">mapper_ep_ei</span>,</span>
<span>  isic_tilt <span class="op">=</span> <span class="va">isic_4digit_name</span>,</span>
<span>  low_threshold <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">3</span>,</span>
<span>  high_threshold <span class="op">=</span> <span class="fl">2</span> <span class="op">/</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">emissions_profile_at_product_level</span> <span class="op">&lt;-</span> <span class="va">emissions_profile</span> <span class="op">|&gt;</span> <span class="fu">unnest_product</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">emissions_profile_at_company_level</span> <span class="op">&lt;-</span> <span class="va">emissions_profile</span> <span class="op">|&gt;</span> <span class="fu">unnest_company</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="save-the-emissions-profile-final-results">Save the Emissions profile final results<a class="anchor" aria-label="anchor" href="#save-the-emissions-profile-final-results"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emissions_profile_at_product_level</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"/path/emissions_profile_at_product_level.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">emissions_profile_at_company_level</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"/path/emissions_profile_at_company_level.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="emissions-profile-upstream">Emissions Profile Upstream<a class="anchor" aria-label="anchor" href="#emissions-profile-upstream"></a>
</h2>
<div class="section level3">
<h3 id="load-data-1">Load Data<a class="anchor" aria-label="anchor" href="#load-data-1"></a>
</h3>
<p>The input data of Emissions Profile Upstream which comes from
tiltIndicatorBefore package becomes the input for the tiltIndicator
package.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epu_company</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/emissions_profile_any_companies_ecoinvent.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">epu_product</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/emissions_profile_upstream_products_ecoinvent.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-emissions-profile-upstream-product-and-company-level-outputs">Create Emissions profile upstream product and company level
outputs<a class="anchor" aria-label="anchor" href="#create-emissions-profile-upstream-product-and-company-level-outputs"></a>
</h3>
<p>The code takes the output of tiltIndicator and use it as an input for
the tiltIndicatorAfter package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emissions_profile_upstream</span> <span class="op">&lt;-</span> <span class="fu">profile_emissions_upstream</span><span class="op">(</span><span class="va">epu_company</span>,</span>
<span>  <span class="va">epu_product</span>,</span>
<span>  europages_companies <span class="op">=</span> <span class="va">europages_campanies</span>,</span>
<span>  ecoinvent_activities <span class="op">=</span> <span class="va">ei_activities_ov</span>,</span>
<span>  ecoinvent_inputs <span class="op">=</span> <span class="va">ei_input</span>,</span>
<span>  ecoinvent_europages <span class="op">=</span> <span class="va">mapper_ep_ei</span>,</span>
<span>  isic_tilt <span class="op">=</span> <span class="va">isic_4digit_name</span>,</span>
<span>  low_threshold <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">3</span>,</span>
<span>  high_threshold <span class="op">=</span> <span class="fl">2</span> <span class="op">/</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">emissions_profile_upstream_at_product_level</span> <span class="op">&lt;-</span> <span class="va">emissions_profile_upstream</span> <span class="op">|&gt;</span> <span class="fu">unnest_product</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">emissions_profile_upstream_at_company_level</span> <span class="op">&lt;-</span> <span class="va">emissions_profile_upstream</span> <span class="op">|&gt;</span> <span class="fu">unnest_company</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="save-the-emissions-profile-upstream-final-results">Save the Emissions profile upstream final results<a class="anchor" aria-label="anchor" href="#save-the-emissions-profile-upstream-final-results"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emissions_profile_upstream_at_product_level</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"/path/emissions_profile_upstream_at_product_level.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">emissions_profile_upstream_at_company_level</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"/path/emissions_profile_upstream_at_company_level.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="sector-profile">Sector Profile<a class="anchor" aria-label="anchor" href="#sector-profile"></a>
</h2>
<div class="section level3">
<h3 id="load-data-2">Load Data<a class="anchor" aria-label="anchor" href="#load-data-2"></a>
</h3>
<p>The input data of Sector Profile which comes from tiltIndicatorBefore
package becomes the input for the tiltIndicator package.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sp_company</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_companies.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sp_scenarios</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_any_scenarios.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-sector-profile-product-and-company-level-outputs">Create Sector profile product and company level outputs<a class="anchor" aria-label="anchor" href="#create-sector-profile-product-and-company-level-outputs"></a>
</h3>
<p>The code takes the output of tiltIndicator and use it as an input for
the tiltIndicatorAfter package.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sector_profile</span> <span class="op">&lt;-</span> <span class="fu">profile_sector</span><span class="op">(</span><span class="va">sp_company</span>,</span>
<span>  <span class="va">sp_scenarios</span>,</span>
<span>  europages_companies <span class="op">=</span> <span class="va">europages_campanies</span>,</span>
<span>  ecoinvent_activities <span class="op">=</span> <span class="va">ei_activities_ov</span>,</span>
<span>  ecoinvent_europages <span class="op">=</span> <span class="va">mapper_ep_ei</span>,</span>
<span>  isic_tilt <span class="op">=</span> <span class="va">isic_4digit_name</span>,</span>
<span>  low_threshold <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">3</span>,</span>
<span>  high_threshold <span class="op">=</span> <span class="fl">2</span> <span class="op">/</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">sector_profile_at_product_level</span> <span class="op">&lt;-</span> <span class="va">sector_profile</span> <span class="op">|&gt;</span> <span class="fu">unnest_product</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sector_profile_at_company_level</span> <span class="op">&lt;-</span> <span class="va">sector_profile</span> <span class="op">|&gt;</span> <span class="fu">unnest_company</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="save-the-sector-profile-final-results">Save the Sector profile final results<a class="anchor" aria-label="anchor" href="#save-the-sector-profile-final-results"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sector_profile_at_product_level</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_at_product_level.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sector_profile_at_company_level</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_at_company_level.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="sector-profile-upstream">Sector profile upstream<a class="anchor" aria-label="anchor" href="#sector-profile-upstream"></a>
</h2>
<div class="section level3">
<h3 id="load-data-3">Load Data<a class="anchor" aria-label="anchor" href="#load-data-3"></a>
</h3>
<p>The input data of Sector profile upstream which comes from
tiltIndicatorBefore package becomes the input for the tiltIndicator
package.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spu_company</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_upstream_companies.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">spu_product</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_upstream_products.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">spu_scenarios</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_any_scenarios.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-sector-profile-upstream-product-and-company-level-outputs-">Create Sector profile upstream product and company level
outputs.<a class="anchor" aria-label="anchor" href="#create-sector-profile-upstream-product-and-company-level-outputs-"></a>
</h3>
<p>The code takes the output of tiltIndicator and use it as an input for
the tiltIndicatorAfter package.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sector_profile_upstream</span> <span class="op">&lt;-</span> <span class="fu">profile_sector_upstream</span><span class="op">(</span><span class="va">spu_company</span>,</span>
<span>  <span class="va">spu_scenarios</span>,</span>
<span>  <span class="va">spu_product</span>,</span>
<span>  europages_companies <span class="op">=</span> <span class="va">europages_campanies</span>,</span>
<span>  ecoinvent_activities <span class="op">=</span> <span class="va">ei_activities_ov</span>,</span>
<span>  ecoinvent_inputs <span class="op">=</span> <span class="va">ei_input</span>,</span>
<span>  ecoinvent_europages <span class="op">=</span> <span class="va">mapper_ep_ei</span>,</span>
<span>  isic_tilt <span class="op">=</span> <span class="va">isic_4digit_name</span>,</span>
<span>  low_threshold <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">3</span>,</span>
<span>  high_threshold <span class="op">=</span> <span class="fl">2</span> <span class="op">/</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">sector_profile_upstream_at_product_level</span> <span class="op">&lt;-</span> <span class="va">sector_profile_upstream</span> <span class="op">|&gt;</span> <span class="fu">unnest_product</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sector_profile_upstream_at_company_level</span> <span class="op">&lt;-</span> <span class="va">sector_profile_upstream</span> <span class="op">|&gt;</span> <span class="fu">unnest_company</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="save-the-sector-profile-upstream-final-results">Save the Sector profile upstream final results<a class="anchor" aria-label="anchor" href="#save-the-sector-profile-upstream-final-results"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sector_profile_upstream_at_product_level</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_upstream_at_product_level.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sector_profile_upstream_at_company_level</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"/path/sector_profile_upstream_at_company_level.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mauro Lepore, 2 Degrees Investing Initiative.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
